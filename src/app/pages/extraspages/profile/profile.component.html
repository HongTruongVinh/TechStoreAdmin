<!-- Start Breadcrumbs -->
<app-breadcrumbs title="Profile Settings" [breadcrumbItems]="breadCrumbItems"></app-breadcrumbs>
<!-- End Breadcrumbs -->

<div class="row">
    <!--end col-->
    <div class="col-xxl-3">
        <div class="card overflow-hidden">
            <div>
                <img src="assets/images/small/img-7.jpg" alt="" id="cover-img" class="card-img-top profile-wid-img object-fit-cover" style="height: 200px;">
            </div>
            <div class="card-body pt-0 mt-n5">
                <div class="text-center">
                    <div class="profile-user position-relative d-inline-block mx-auto">
                        <img src="assets/images/users/avatar-1.jpg" alt="" id="user-img" class="avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image">
                        <div class="avatar-xs p-0 rounded-circle profile-photo-edit position-absolute end-0 bottom-0">
                            <input id="profile-img-file-input" type="file" class="profile-img-file-input d-none" (change)="fileChange($event,'1')">
                            <label for="profile-img-file-input" class="profile-photo-edit avatar-xs">
                                <span class="avatar-title rounded-circle bg-light text-body">
                                    <i class="bi bi-camera"></i>
                                </span>
                            </label>
                        </div>
                    </div>
                    <div class="mt-3">
                        <h5 id="label-username">{{username}}<i class="bi bi-patch-check-fill align-baseline text-info ms-1"></i></h5>
                        <p id="label-rolename" class="text-muted">{{roleName}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xxl-9">
        <div class="d-flex align-items-center flex-wrap gap-2 mb-4">
            <ul class="nav nav-pills arrow-navtabs nav-secondary gap-2 flex-grow-1 order-2 order-lg-1" role="tablist">
                <li class="nav-item" role="presentation">
                    <a class="nav-link active" data-bs-toggle="tab" href="javascript:void(0);" [class.active]="currentTab === 'personalDetails'" (click)="changeTab('personalDetails')" role="tab" aria-selected="true">
                        Trang thông tin cá nhân
                    </a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" data-bs-toggle="tab" href="javascript:void(0);" [class.active]="currentTab === 'changePassword'" (click)="changeTab('changePassword')" role="tab" aria-selected="false" tabindex="-1">
                        Trang đổi mật khẩu
                    </a>
                </li>
            </ul>
            <div class="flex-shrink-0 ms-auto order-1 order-lg-2">
                <a (click)="enableEditMode()" class="btn btn-secondary"><i class="bi bi-pencil-square align-baseline me-1"></i> Edit Profile</a>
            </div>
        </div>
        <div class="card">
            <div class="tab-content">
                <div [hidden]="currentTab !== 'personalDetails'" class="tab-pane active" id="personalDetails" role="tabpanel">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title mb-0">Thông tin cá nhân</h6>
                        </div>
                        <div class="card-body">
                            <form (ngSubmit)="updateProfileAction()" [formGroup]="profileForm">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="firstName" class="form-label">Tên</label>
                                            <input formControlName="firstName" type="text" class="form-control" id="firstName" placeholder="Enter your firstname">
                                        </div>
                                    </div>
                                    <!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="lastnameInput" class="form-label">Họ và tên đệm</label>
                                            <input formControlName="lastName" type="text" class="form-control" id="lastnameInput" placeholder="Enter your last name">
                                        </div>
                                    </div>
                                    <!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="phonenumberInput" class="form-label">Số điện thoại</label>
                                            <input formControlName="phoneNumber" type="text" class="form-control" id="phonenumberInput" placeholder="Enter your phone number" >
                                        </div>
                                    </div>
                                    <!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="emailInput" class="form-label">Địa chỉ Email</label>
                                            <input formControlName="email" type="email" class="form-control" id="emailInput" placeholder="Enter your email">
                                        </div>
                                    </div>
                                    <!--end col-->
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="birthDateInput" class="form-label">Ngày sinh</label>
                                            <input formControlName="birthday" type="text" class="form-control"  showWeekNumbers="false" bsDatepicker [bsConfig]="bsConfig" value="{{originalProfileData.birthday | dateToString:'getDatetime'}}">
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="mb-3">
                                            <label for="JoiningdatInput" class="form-label">Ngày tham gia</label>
                                            <input formControlName="createdAt" readonly type="text" class="form-control" showWeekNumbers="false" bsDatepicker [bsConfig]="bsConfig" value="{{originalProfileData.createdAt | dateToString:'getDatetime'}}">
                                        </div>
                                    </div>
                                    <!--end col-->
                                    <div class="col-lg-4">
                                        <div class="mb-3">
                                            <label for="cityInput" class="form-label">Địa chỉ</label>
                                            <input formControlName="address" type="text" class="form-control" id="cityInput" placeholder="City">
                                        </div>
                                    </div>
                                    <!--end col-->
                                    <div class="col-lg-4">
                                        <div class="mb-3">
                                            <label for="countryInput" class="form-label">Quốc gia</label>
                                            <input readonly type="text" class="form-control" id="countryInput" placeholder="Country" value="Việt Nam">
                                        </div>
                                    </div>
                                    <!--end col-->
                                    <div class="col-lg-12" *ngIf="isEditMode">
                                        <div class="hstack gap-2 justify-content-end">
                                            <button type="submit" class="btn btn-primary">Lưu</button>
                                            <button type="button" class="btn btn-subtle-danger" (click)="cancelEdit()">Hủy bỏ</button>
                                        </div>
                                    </div>
                                    <!--end col-->
                                </div>
                                <!--end row-->
                            </form>
                        </div>
                    </div>
                </div>
                <div [hidden]="currentTab !== 'changePassword'" class="tab-pane active" id="changePassword" role="tabpanel">
                    <div class="card-header">
                        <h6 class="card-title mb-0">Đổi mật khẩu</h6>
                    </div>
                    <div class="card-body">
                        <form action="pages-profile-settings.html">
                            <div class="row g-2 justify-content-lg-between align-items-center">
                                <div class="col-lg-4">
                                    <div class="auth-pass-inputgroup">
                                        <label for="oldpasswordInput" class="form-label">Mật khẩu cũ*</label>
                                        <div class="position-relative">
                                            <input [type]="fieldTextType ? 'text' : 'password'" class="form-control password-input" id="oldpasswordInput" placeholder="Enter current password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}">
                                            <button class="btn btn-link position-absolute top-0 end-0 text-decoration-none text-muted password-addon" type="button">
                                                <i class="ri-eye-fill align-middle" [ngClass]="{'mdi-eye-off-outline': !fieldTextType, 'mdi-eye-outline': fieldTextType}" (click)="toggleFieldTextType()"></i></button>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-4">
                                    <div class="auth-pass-inputgroup">
                                        <label for="password-input" class="form-label">Mật khẩu mới*</label>
                                        <div class="position-relative">
                                            <input [type]="fieldTextType1 ? 'text' : 'password'" class="form-control password-input" id="password-input" onpaste="return false" placeholder="Enter new password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required>
                                            <button class="btn btn-link position-absolute end-0 top-0 text-decoration-none text-muted password-addon" type="button"><i class="ri-eye-fill align-middle" [ngClass]="{'mdi-eye-off-outline': !fieldTextType1, 'mdi-eye-outline': fieldTextType1}" (click)="toggleFieldTextType1()"></i></button>
                                        </div>

                                    </div>
                                </div>

                                <div class="col-lg-4">
                                    <div class="auth-pass-inputgroup">
                                        <label for="confirm-password-input" class="form-label">Nhập lại mật khẩu mới*</label>
                                        <div class="position-relative">
                                            <input [type]="fieldTextType2 ? 'text' : 'password'" class="form-control password-input" onpaste="return false" id="confirm-password-input" placeholder="Confirm password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required>
                                            <button class="btn btn-link position-absolute end-0 top-0 text-decoration-none text-muted password-addon" type="button"><i class="ri-eye-fill align-middle" [ngClass]="{'mdi-eye-off-outline': !fieldTextType2, 'mdi-eye-outline': fieldTextType2}" (click)="toggleFieldTextType2()"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <a href="javascript:void(0);" class="link-primary text-decoration-underline">Quên mật khẩu ?</a>
                                    <div class="">

                                        <button type="submit" class="btn btn-success">Lưu thay đổi</button>
                                    </div>
                                </div>

                                <!--end col-->

                                <div class="col-lg-12">
                                    <div class="card bg-light shadow-none passwd-bg" id="password-contain">
                                        <div class="card-body">
                                            <div class="mb-4">
                                                <h5 class="fs-sm">Password must contain:</h5>
                                            </div>
                                            <div class="">
                                                <p id="pass-length" class="invalid fs-xs mb-2">Minimum <b>8
                                                        characters</b></p>
                                                <p id="pass-lower" class="invalid fs-xs mb-2">At
                                                    <b>lowercase</b>
                                                    letter
                                                    (a-z)
                                                </p>
                                                <p id="pass-upper" class="invalid fs-xs mb-2">At least
                                                    <b>uppercase</b>
                                                    letter (A-Z)
                                                </p>
                                                <p id="pass-number" class="invalid fs-xs mb-0">A least
                                                    <b>number</b>
                                                    (0-9)
                                                </p>

                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!--end row-->
                        </form>
                    </div>
                </div>
                <!--end tab-pane-->
            </div>
        </div>
    </div>
    <!--end col-->
</div>
<!--end row-->